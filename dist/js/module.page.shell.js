!function(e){"use strict";var t={init:function(){var t=this,i=null;chrome.extension.onRequest.addListener(function(t,a,n){if(a&&a.id===chrome.i18n.getMessage("@@extension_id"))switch(t.name){case"settings":i=t.data,e.jps.publish("init-selectionphrase",{container:e(document.body),dictLookup:i.dictHostpage||"selection",from:"page"});break;case"lookupphrase-result":if("page"!==t.data.from)return;if(t.data.phrase!==document.getSelection().toString().trim())return;e.jps.publish("init-dict-layer",{dictData:t.data.dictData,position:t.data.position,hover:"hover"===i.dictHostpage});break;case"checkwords-result":e.jps.publish("init-dict-checkresult-layer",{dictDataArr:t.data.dictDataArr})}}),chrome.extension.connect({name:"getsettings"}).postMessage(""),e(document.body).keydown(function(e){(e.metaKey||e.ctrlKey)&&e.shiftKey&&88===e.keyCode&&chrome.extension.connect({name:"createreader"})}),t.addEvent(),t.fuckPutian()},addEvent:function(){e.jps.subscribe("create-mask-layer",function(e,t,i){App.modules.maskLayer.create(e,t,i)}),e.jps.subscribe("hide-all-mask-layers",function(){App.modules.maskLayer.hideAll()})},fuckPutian:function(){for(var t=window.putianHospitalDataJiZhuReader.urls,i=window.location.hostname,a=0;a<t.length;a++)if(t[a].indexOf(i)!==-1||i.indexOf(t[a])!==-1){e(document.body).css({overflow:"hidden",position:"static"}),e.jps.publish("create-mask-layer",document.body,"putian",t[a]);break}}};e(function(){t.init()})}(Zepto);