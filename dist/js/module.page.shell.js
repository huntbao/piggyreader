!function(e){"use strict";var t={init:function(){var t=this,i=null;chrome.extension.onRequest.addListener(function(t,n,o){if(n&&n.id===chrome.i18n.getMessage("@@extension_id"))switch(t.name){case"settings":i=t.data,e.jps.publish("init-selectionphrase",{container:e(document.body),dictLookup:i.dictHostpage||"selection",from:"page"});break;case"lookupphrase-result":if("page"!==t.data.from)return;if(t.data.phrase!==document.getSelection().toString().trim())return;e.jps.publish("init-dict-layer",{dictData:t.data.dictData,position:t.data.position,hover:"hover"===i.dictHostpage})}}),chrome.extension.connect({name:"getsettings"}).postMessage(),e(document.body).keydown(function(e){(e.metaKey||e.ctrlKey)&&e.shiftKey&&88===e.keyCode&&chrome.extension.connect({name:"createreader"})}),t.__injectPageLasteModifiedTime()},__injectPageLasteModifiedTime:function(){var t='<div id="jz-page-lastmodified">'+document.lastModified+"</div>";e(document.body).append(t)}};e(function(){t.init()})}(jQuery);